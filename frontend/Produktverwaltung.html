<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produktverwaltung</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<h2>Produkte verwalten</h2>
<table id="productTable">
  <thead>
    <tr><th>Name</th><th>Preis</th><th>Aktionen</th></tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const tbody = document.querySelector("#productTable tbody");

async function loadProducts() {
  const res = await fetch("http://localhost:3000/api/produkte");
  const products = await res.json();
  tbody.innerHTML = "";
  products.forEach(p => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${p.name}</td>
      <td>${p.preis.toFixed(2)}</td>
      <td>
        <button onclick="deleteProduct('${p.id}')">LÃ¶schen</button>
      </td>`;
    tbody.appendChild(row);
  });
}

async function deleteProduct(id) {
  await fetch(`http://localhost:3000/api/produkte/${id}`, { method: "DELETE" });
  loadProducts();
}

loadProducts();
</script>
</body>
</html>
